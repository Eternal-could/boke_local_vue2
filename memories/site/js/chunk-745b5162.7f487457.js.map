{"version":3,"sources":["webpack:///./src/service/AuthorService.js","webpack:///./src/pages/admin/views/Permission.vue?3224","webpack:///src/pages/admin/views/Permission.vue","webpack:///./src/pages/admin/views/Permission.vue?cedd","webpack:///./src/pages/admin/views/Permission.vue"],"names":["AuthorService","userData","axios","post","defaultConfig","baseApiUrl","get","data","args","params","render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","userList","scopedSlots","_u","key","fn","scope","row","avatar","approved","on","$event","switchApproved","switchAdmin","model","value","callback","$$v","$set","expression","rejectedUser","_v","userTotalNum","searchUserParams","limit","handleUserCurrentChange","staticRenderFns","name","offset","created","getUserList","methods","userItem","$confirm","confirmButtonText","cancelButtonText","type","then","message","catch","isAdmin","user","rs","status","page","component"],"mappings":"8LAGMA,E,2JACF,WAAmBC,GAAnB,0GACWC,OAAMC,KAAN,UAAcC,OAAcC,WAA5B,gCAAqEJ,IADhF,2C,gJAIA,uHACWC,OAAMI,IAAN,UAAaF,OAAcC,WAA3B,qCADX,2C,yIAIA,WAAgBJ,GAAhB,0GACWC,OAAMC,KAAN,UAAcC,OAAcC,WAA5B,6BAAkEJ,IAD7E,2C,+IAIA,WAAqBM,GAArB,0GACWL,OAAMC,KAAN,UAAcC,OAAcC,WAA5B,kCAAwEE,IADnF,2C,sJAIA,WAA4BC,GAA5B,0GACWN,OAAMI,IAAN,UAAaF,OAAcC,WAA3B,kCAAuE,CAC1EI,OAAOD,KAFf,2C,+IAMA,WAAqBA,GAArB,0GACWN,OAAMI,IAAN,UAAaF,OAAcC,WAA3B,6BAAkE,CACrEI,OAAOD,KAFf,2C,6IAMA,WAAmBA,GAAnB,0GACWN,OAAMC,KAAN,UAAcC,OAAcC,WAA5B,gCAAsEG,IADjF,2C,+IAIA,WAAqBA,GAArB,0GACWN,OAAMC,KAAN,UAAcC,OAAcC,WAA5B,kCAAwEG,IADnF,2C,2IAIA,WAAiBA,GAAjB,0GACWN,OAAMC,KAAN,UAAcC,OAAcC,WAA5B,8BAAoEG,IAD/E,2C,yIAIA,WAAeA,GAAf,0GACWN,OAAMC,KAAN,UAAcC,OAAcC,WAA5B,4BAAkEG,IAD7E,2C,4IAIA,WAAkBA,GAAlB,0GACWN,OAAMC,KAAN,UAAcC,OAAcC,WAA5B,+BAAqEG,IADhF,2C,oJAIA,uHACWN,OAAMI,IAAN,UAAaF,OAAcC,WAA3B,sCADX,2C,gEAKW,WAAIL,G,yCCzDnB,IAAIU,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,WAAW,CAACE,YAAY,CAAC,MAAQ,QAAQC,MAAM,CAAC,KAAOP,EAAIQ,WAAW,CAACJ,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,WAAW,MAAQ,MAAM,MAAQ,SAASH,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,SAAS,MAAQ,MAAME,YAAYT,EAAIU,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACT,EAAG,WAAW,CAACE,YAAY,CAAC,MAAQ,SAASC,MAAM,CAAC,IAAM,OAAO,IAAMM,EAAMC,IAAIC,iBAAiBX,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,eAAe,MAAQ,UAAUH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,UAAUE,YAAYT,EAAIU,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACT,EAAG,YAAY,CAACG,MAAM,CAAC,OAASM,EAAMC,IAAIE,SAAS,eAAe,UAAU,iBAAiB,WAAWC,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOlB,EAAImB,eAAeN,EAAMC,gBAAgBV,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,YAAYE,YAAYT,EAAIU,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACT,EAAG,YAAY,CAACG,MAAM,CAAC,eAAe,UAAU,iBAAiB,WAAWU,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOlB,EAAIoB,YAAYP,EAAMC,OAAOO,MAAM,CAACC,MAAOT,EAAMC,IAAW,QAAES,SAAS,SAAUC,GAAMxB,EAAIyB,KAAKZ,EAAMC,IAAK,UAAWU,IAAME,WAAW,8BAA8BtB,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,KAAK,MAAQ,OAAOE,YAAYT,EAAIU,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACT,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,UAAUU,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAI2B,aAAad,EAAMC,QAAQ,CAACd,EAAI4B,GAAG,gBAAgB,GAAGxB,EAAG,MAAM,CAACE,YAAY,CAAC,QAAU,OAAO,kBAAkB,SAAS,aAAa,SAAS,CAACF,EAAG,gBAAgB,CAACG,MAAM,CAAC,uBAAsB,EAAK,OAAS,oBAAoB,MAAQP,EAAI6B,aAAa,YAAY7B,EAAI8B,iBAAiBC,OAAOd,GAAG,CAAC,iBAAiBjB,EAAIgC,4BAA4B,IAAI,IAC1uDC,EAAkB,G,YC4EP,GACbC,KAAMA,aACNtC,KAFF,WAGI,MAAO,CACLkC,iBAAkBA,CAChBC,MAAOA,GACPI,OAAQA,GAEVN,aAAcA,EACdrB,SAAUA,KAGd4B,QAZF,WAaInC,KAAKoC,eAEPC,QAASA,CACPnB,eADJ,SACAoB,GAAA,WACMA,EAASA,UAAYA,EAASA,SAC9BtC,KAAKuC,SAAS,gCAAiC,KAAM,CACnDC,kBAAmBA,oBACnBC,iBAAkBA,MAClBC,KAAMA,YACdC,MAAA,WACA,WAEUvD,qBACEsB,IAAZA,QACAiC,MAAA,WACY,EAAZ,UACcD,KAAdA,UACcE,QAAdA,YAKUxD,uBACEsB,IAAZA,QACAiC,MAAA,WACY,EAAZ,UACcD,KAAdA,UACcE,QAAdA,eAIAC,OAAA,WACQP,EAASA,SAAWA,EAASA,QAC7B,EAAR,UACUI,KAAMA,OACNE,QAASA,aAIfzB,YArCJ,SAqCAmB,GAAA,WACMtC,KAAKuC,SAAS,gCAAiC,KAAM,CACnDC,kBAAmBA,oBACnBC,iBAAkBA,MAClBC,KAAMA,YACdC,MAAA,WACaL,EAASvB,SAORuB,EAASQ,QAEX1D,OAAcA,SAASA,CACrBsB,IAAKA,EAASA,MAC5BiC,MAAA,WACc,EAAd,UACgBD,KAAMA,UACNE,QAASA,cAKbxD,OAAcA,YAAYA,CACxBsB,IAAKA,EAASA,MAC5BiC,MAAA,WACc,EAAd,UACgBD,KAAMA,UACNE,QAASA,eAvBfN,EAASA,SAAWA,EAASA,QAC7B,EAAV,UACYI,KAAMA,UACNE,QAASA,mBAyBrBC,OAAA,WACQP,EAASA,SAAWA,EAASA,QAC7B,EAAR,UACUI,KAAMA,OACNE,QAASA,aAIfR,YAhFJ,WAgFA,WACMhD,OAAcA,eAAeA,KAAKA,kBAAkBA,MAAKA,SAA5CA,GACX,EAAR,sCACQ,EAAR,kCAGIsC,aAtFJ,SAsFAqB,GAAA,WACM/C,KAAKuC,SAAS,4BAA6B,KAAM,CAC/CC,kBAAmBA,KACnBC,iBAAkBA,KAClBC,KAAMA,YACdC,MAAA,WACQvD,OAAcA,WAAWA,CACvBsB,IAAKA,EAAKA,MACpBiC,MAAA,YAC4B,MAAdK,EAAGC,SACL,EAAZ,yBACY,EAAZ,qBAGAJ,OAAA,gBAIId,wBAxGJ,SAwGAmB,GACMlD,KAAK6B,iBAAiBK,QAAUgB,EAAO,GAAKlD,KAAK6B,iBAAiBC,MAClE9B,KAAKoC,iBCtMuW,I,YCO9We,EAAY,eACd,EACArD,EACAkC,GACA,EACA,KACA,WACA,MAIa,aAAAmB,E","file":"js/chunk-745b5162.7f487457.js","sourcesContent":["import axios from \"./config/axios.default.config\";\nimport defaultConfig from \"@/config/config.default\";\n\nclass AuthorService {\n    async registerUser(userData) {\n        return axios.post(`${defaultConfig.baseApiUrl}/authentication/registerUser`,userData);\n    }\n\n    async checkPermission() {\n        return axios.get(`${defaultConfig.baseApiUrl}/authentication/checkPermission`);\n    }\n\n    async loginUser(userData) {\n        return axios.post(`${defaultConfig.baseApiUrl}/authentication/loginUser`,userData);\n    }\n\n    async updateUserInfo(data) {\n        return axios.post(`${defaultConfig.baseApiUrl}/authentication/updateUserInfo`, data)\n    }\n\n    async getUnapprovedUserList(args) {\n        return axios.get(`${defaultConfig.baseApiUrl}/authentication/unapprovedUser`, {\n            params:args\n        })\n    }\n\n    async getAllUserList(args) {\n        return axios.get(`${defaultConfig.baseApiUrl}/authentication/unAllUser`, {\n            params:args\n        })\n    }\n\n    async approvedUser(args) {\n        return axios.post(`${defaultConfig.baseApiUrl}/authentication/approvedUser`, args)\n    }\n\n    async unApprovedUser(args) {\n        return axios.post(`${defaultConfig.baseApiUrl}/authentication/unApprovedUser`, args)\n    }\n\n    async deleteUser(args) {\n        return axios.post(`${defaultConfig.baseApiUrl}/authentication/deleteUser`, args)\n    }\n\n    async setAdmin(args) {\n        return axios.post(`${defaultConfig.baseApiUrl}/authentication/setAdmin`, args)\n    }\n\n    async cancelAdmin(args) {\n        return axios.post(`${defaultConfig.baseApiUrl}/authentication/cancelAdmin`, args)\n    }\n\n    async getUserRegisterInfo(){\n        return axios.get(`${defaultConfig.baseApiUrl}/authentication/userRegisterInfo`)\n    }\n}\n\nexport default new AuthorService;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.userList}},[_c('el-table-column',{attrs:{\"prop\":\"userName\",\"label\":\"用户名\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"avatar\",\"label\":\"头像\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-image',{staticStyle:{\"width\":\"100px\"},attrs:{\"fit\":\"fill\",\"src\":scope.row.avatar}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"introduction\",\"label\":\"用户简介\"}}),_c('el-table-column',{attrs:{\"label\":\"是否冻结账户\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"value\":!scope.row.approved,\"active-color\":\"#13ce66\",\"inactive-color\":\"#c0ccda\"},on:{\"change\":function($event){return _vm.switchApproved(scope.row)}}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"是否设置为管理员\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#c0ccda\"},on:{\"change\":function($event){return _vm.switchAdmin(scope.row)}},model:{value:(scope.row.isAdmin),callback:function ($$v) {_vm.$set(scope.row, \"isAdmin\", $$v)},expression:\"scope.row.isAdmin\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.rejectedUser(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"center\",\"margin-top\":\"20px\"}},[_c('el-pagination',{attrs:{\"hide-on-single-page\":true,\"layout\":\"prev, pager, next\",\"total\":_vm.userTotalNum,\"page-size\":_vm.searchUserParams.limit},on:{\"current-change\":_vm.handleUserCurrentChange}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-table\r\n        :data=\"userList\"\r\n        style=\"width: 100%\">\r\n      <el-table-column\r\n          prop=\"userName\"\r\n          label=\"用户名\"\r\n          width=\"180\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n          prop=\"avatar\"\r\n          label=\"头像\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <el-image\r\n              fit=\"fill\"\r\n              :src=\"scope.row.avatar\"\r\n              style=\"width: 100px;\"\r\n          ></el-image>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n          prop=\"introduction\"\r\n          label=\"用户简介\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n          label=\"是否冻结账户\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <el-switch\r\n              :value=\"!scope.row.approved\"\r\n              active-color=\"#13ce66\"\r\n              inactive-color=\"#c0ccda\"\r\n              @change=\"switchApproved(scope.row)\"\r\n          ></el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n          label=\"是否设置为管理员\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <el-switch\r\n              v-model=\"scope.row.isAdmin\"\r\n              active-color=\"#13ce66\"\r\n              inactive-color=\"#c0ccda\"\r\n              @change=\"switchAdmin(scope.row)\"\r\n          ></el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n          label=\"操作\"\r\n          width=\"180\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"danger\" @click=\"rejectedUser(scope.row)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div style=\"display: flex;justify-content: center;margin-top: 20px;\">\r\n      <el-pagination\r\n          :hide-on-single-page=\"true\"\r\n          layout=\"prev, pager, next\"\r\n          :total=\"userTotalNum\"\r\n          :page-size=\"searchUserParams.limit\"\r\n          @current-change=\"handleUserCurrentChange\"\r\n      >\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AuthorService from \"@/service/AuthorService\";\r\n\r\nexport default {\r\n  name: \"Permission\",\r\n  data() {\r\n    return {\r\n      searchUserParams: {\r\n        limit: 10,\r\n        offset: 0\r\n      },\r\n      userTotalNum: 0,\r\n      userList: [],\r\n    }\r\n  },\r\n  created() {\r\n    this.getUserList();\r\n  },\r\n  methods: {\r\n    switchApproved(userItem) {\r\n      userItem.approved = !userItem.approved;\r\n      this.$confirm('此操作将改变此用户的权限, 后续影响极大, 请问是否继续?', '警告', {\r\n        confirmButtonText: '我考虑清楚了, 我就要这么干!!!',\r\n        cancelButtonText: '不干了',\r\n        type: 'warning'\r\n      }).then(() => {\r\n          if (userItem.approved) {\r\n            // 设置管理员权限\r\n            AuthorService.approvedUser({\r\n              key: userItem.key\r\n            }).then(() => {\r\n              this.$message({\r\n                type: 'success',\r\n                message: '解冻成功'\r\n              })\r\n            })\r\n          } else {\r\n            // 取消管理员权限\r\n            AuthorService.unApprovedUser({\r\n              key: userItem.key\r\n            }).then(() => {\r\n              this.$message({\r\n                type: 'success',\r\n                message: '冻结成功'\r\n              })\r\n            })\r\n          }\r\n      }).catch(() => {\r\n        userItem.isAdmin = !userItem.isAdmin;\r\n        this.$message({\r\n          type: 'info',\r\n          message: '取消操作'\r\n        })\r\n      })\r\n    },\r\n    switchAdmin(userItem) {\r\n      this.$confirm('此操作将改变此用户的权限, 后续影响极大, 请问是否继续?', '警告', {\r\n        confirmButtonText: '我考虑清楚了, 我就要这么干!!!',\r\n        cancelButtonText: '不干了',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        if (!userItem.approved) {\r\n          userItem.isAdmin = !userItem.isAdmin;\r\n          this.$message({\r\n            type: 'warning',\r\n            message: '该用户还没有通过审核'\r\n          })\r\n        } else {\r\n          if (userItem.isAdmin) {\r\n            // 设置管理员权限\r\n            AuthorService.setAdmin({\r\n              key: userItem.key\r\n            }).then(() => {\r\n              this.$message({\r\n                type: 'success',\r\n                message: '更改权限成功'\r\n              })\r\n            })\r\n          } else {\r\n            // 取消管理员权限\r\n            AuthorService.cancelAdmin({\r\n              key: userItem.key\r\n            }).then(() => {\r\n              this.$message({\r\n                type: 'success',\r\n                message: '更改权限成功'\r\n              })\r\n            })\r\n          }\r\n        }\r\n      }).catch(() => {\r\n        userItem.isAdmin = !userItem.isAdmin;\r\n        this.$message({\r\n          type: 'info',\r\n          message: '取消操作'\r\n        })\r\n      })\r\n    },\r\n    getUserList() {\r\n      AuthorService.getAllUserList(this.searchUserParams).then(rs => {\r\n        this.userTotalNum = rs.data.data.userTotalNum;\r\n        this.userList = rs.data.data.userList;\r\n      })\r\n    },\r\n    rejectedUser(user) {\r\n      this.$confirm('此操作将永久删除该用户以及其所有博客, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        AuthorService.deleteUser({\r\n          key: user.key\r\n        }).then(rs => {\r\n          if (rs.status === 200) {\r\n            this.$message.success('删除成功');\r\n            this.getUserList();\r\n          }\r\n        })\r\n      }).catch(() => {\r\n      });\r\n\r\n    },\r\n    handleUserCurrentChange(page) {\r\n      this.searchUserParams.offset = (page - 1) * this.searchUserParams.limit;\r\n      this.getUserList();\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Permission.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Permission.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Permission.vue?vue&type=template&id=016bf5bc&scoped=true&\"\nimport script from \"./Permission.vue?vue&type=script&lang=js&\"\nexport * from \"./Permission.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"016bf5bc\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}